<!DOCTYPE html>
<html lang="en">
<head>
  <title>Create Invoice</title>

  <!-- shared head -->
  <div id="head-placeholder"></div>
  <script>
    fetch("head.html")
      .then(r => r.text())
      .then(html => document.getElementById("head-placeholder").innerHTML = html);
  </script>
</head>
<body>
  <!-- shared navbar -->
  <header>
    <div id="menu-placeholder"></div>
    <script>
      fetch("menu.html")
        .then(r => r.text())
        .then(html => document.getElementById("menu-placeholder").innerHTML = html);
    </script>
  </header>

  <main class="container mt-4">
    <h1>Create Invoice</h1>

    <!-- Invoice header form -->
    <form id="invoice-form" class="row g-3 mb-4">
      <!-- Invoice #, Date, Customer, Project, Status, Due Date -->
      <div class="col-md-3">
        <label for="invoice-number" class="form-label">Invoice #</label>
        <input type="number" id="invoice-number" class="form-control" value="10024" required>
      </div>
      <div class="col-md-3">
        <label for="invoice-date-input" class="form-label">Date</label>
        <input type="date" id="invoice-date-input" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label for="invoice-customer-input" class="form-label">Customer</label>
        <input type="text" id="invoice-customer-input" class="form-control" placeholder="Customer name" required>
      </div>
      <div class="col-md-3">
        <label for="invoice-project-input" class="form-label">Project</label>
        <input type="text" id="invoice-project-input" class="form-control" placeholder="Project name" required>
      </div>
      <div class="col-md-3">
        <label for="invoice-status-input" class="form-label">Payment Status</label>
        <select id="invoice-status-input" class="form-select" required>
          <option>Due in full</option>
          <option>Partial payment</option>
          <option>Paid</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="invoice-due-input" class="form-label">Due Date</label>
        <input type="date" id="invoice-due-input" class="form-control" required>
      </div>
    </form>

    <!-- Line items + buttons -->
    <div id="line-items" class="mb-3"></div>
    <button id="add-line-item-btn" class="btn btn-secondary mb-2">+ Add Item</button>
    <button id="preview-invoice-btn" class="btn btn-primary mb-4">Preview Invoice</button>
    <button id="download-invoice-btn" class="btn btn-success me-2">Download PDF</button>  
    <button id="save-invoice-btn" class="btn btn-outline-secondary">Save Invoice</button>

    <hr>

    <!-- Invoice preview -->
    <div id="invoice-preview" class="p-4 bg-white border" style="display:none;">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <img src="Umilitee.png" alt="Logo" style="height:60px">
        <div>
          <strong>UMILI TEE LLC</strong><br>
          2754 Villa Bella Ct<br>
          League City, TX 77573<br>
          (832)385-7092
        </div>
      </div>

      <h2 class="mb-3">Invoice <span id="invoice-status" class="fw-bold"></span></h2>

      <table class="table mb-4">
        <tbody>
          <tr>
            <td><strong>Invoice For:</strong> <span id="invoice-customer"></span></td>
            <td><strong>Payable To:</strong> Alan Leenhouts</td>
            <td><strong>Invoice #:</strong> <span id="preview-invoice-number"></span></td>
            <td><strong>Date:</strong> <span id="invoice-date"></span></td>
          </tr>
          <tr>
            <td><strong>Project:</strong> <span id="invoice-project"></span></td>
            <td><strong>Due Date:</strong> <span id="invoice-due"></span></td>
            <td colspan="2"></td>
          </tr>
        </tbody>
      </table>

      <table class="table">
        <thead>
          <tr>
            <th>Description</th><th>Qty</th><th>Unit Price</th><th>Total</th>
          </tr>
        </thead>
        <tbody id="invoice-summary"></tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-end"><strong>Subtotal</strong></td>
            <td id="invoice-total"></td>
          </tr>
        </tfoot>
      </table>

      <p class="mt-4">Notes: 50% deposit to start production</p>
    </div>
  </main>

  <!-- Shared scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="invoice.js" defer></script>>
</body>
</html>
